---
title: "Exercises"
linktitle: "3. Selecting, filtering, and mutating"
date: "2020-07-27"
publishdate: "2020-07-27"
menu:
  exercise:
type: docs
output:
  blogdown::html_page:
    toc: true
    toc_depth: 2
    number_sections: true
    pandoc_args: ["--number-offset=3"]
---


<div id="TOC">
<ul>
<li><a href="#the-basics"><span class="toc-section-number">4</span> The basics</a><ul>
<li><a href="#install-and-set-up-r-and-rstudio"><span class="toc-section-number">4.1</span> Install and set up R and RStudio</a></li>
</ul></li>
</ul>
</div>

<div id="the-basics" class="section level1">
<h1><span class="header-section-number">4</span> The basics</h1>
<div id="install-and-set-up-r-and-rstudio" class="section level2">
<h2><span class="header-section-number">4.1</span> Install and set up R and RStudio</h2>
<div id="install-r" class="section level3 unnumbered">
<h3>Install R</h3>
<div id="using-the-nlsy-data-and-mutate-make-a-standardized-centered-at-the-mean-and-divided-by-the-standard-deviation-version-of-income." class="section level4">
<h4><span class="header-section-number">4.1.0.1</span> 1. Using the NLSY data and <code>mutate()</code>, make a standardized (centered at the mean, and divided by the standard deviation) version of income.</h4>
<pre class="r"><code>nlsy &lt;- mutate(nlsy,
               income_stand = (income - mean(income) ) / sd(income)
)</code></pre>
<pre class="message"><code>#&gt;  Error in mutate(nlsy, income_stand = (income - mean(income))/sd(income)): could not find function &quot;mutate&quot;
summary(nlsy$income_stand)</code></pre>
<pre class="message"><code>#&gt;  Error in summary(nlsy$income_stand): object &#39;nlsy&#39; not found
sd(nlsy$income_stand)</code></pre>
<pre class="message"><code>#&gt;  Error in is.data.frame(x): object &#39;nlsy&#39; not found</code></pre>
</div>
<div id="redo-question-2-but-if-you-are-not-able-to-calculate-logincome-for-an-observation-replace-it-with-a-missing-value-using-case_when.-this-time-when-you-standardize-logincome-youll-have-to-use-na.rm-true-to-remove-missing-values-both-when-you-take-the-mean-and-the-standard-deviation." class="section level4">
<h4><span class="header-section-number">4.1.0.2</span> 3. Redo question 2, but if you are not able to calculate log(income) for an observation, replace it with a missing value (using <code>case_when()</code>). This time, when you standardize log(income), you’ll have to use <code>na.rm = TRUE</code> to remove missing values both when you take the mean and the standard deviation.</h4>
<pre class="r"><code>nlsy &lt;- mutate(nlsy,
               income_stand = (income - mean(income) ) / sd(income),
               log_income = case_when(
                 income == 0 ~ NA_real_,
                 TRUE ~ log(income)
               ),
               log_income_stand = (log_income - mean(log_income, na.rm = TRUE) ) / 
                 sd(log_income, na.rm = TRUE)
               )</code></pre>
<pre class="message"><code>#&gt;  Error in mutate(nlsy, income_stand = (income - mean(income))/sd(income), : could not find function &quot;mutate&quot;
summary(nlsy$log_income_stand)</code></pre>
<pre class="message"><code>#&gt;  Error in summary(nlsy$log_income_stand): object &#39;nlsy&#39; not found</code></pre>
<!-- Exercises 2 -->
</div>
<div id="use-two-different-methods-to-combine-the-worst-two-categories-of-eyesight-into-one-category." class="section level4">
<h4><span class="header-section-number">4.1.0.3</span> 2. Use two different methods to combine the worst two categories of eyesight into one category.</h4>
<pre class="r"><code>nlsy &lt;- mutate(nlsy,
  eyesight_worst = fct_collapse(eyesight_fact,
    &quot;Worst&quot; = c(&quot;Fair&quot;, &quot;Poor&quot;)
  )
)</code></pre>
<pre class="message"><code>#&gt;  Error in mutate(nlsy, eyesight_worst = fct_collapse(eyesight_fact, Worst = c(&quot;Fair&quot;, : could not find function &quot;mutate&quot;
summary(nlsy$eyesight_worst)</code></pre>
<pre class="message"><code>#&gt;  Error in summary(nlsy$eyesight_worst): object &#39;nlsy&#39; not found
# can also use fct_lump since I know the two worst are the 
# two smallest categories
nlsy &lt;- mutate(nlsy,
  eyesight_worst2 = fct_lump(eyesight_fact,
    n = 3,
    other_level = &quot;Worst&quot;
  )
)</code></pre>
<pre class="message"><code>#&gt;  Error in mutate(nlsy, eyesight_worst2 = fct_lump(eyesight_fact, n = 3, : could not find function &quot;mutate&quot;</code></pre>
</div>
<div id="create-mean-centered-versions-of-age_bir-nsibs-income-and-the-two-sleep-variables.-use-the-same-ending-e.g.-_cent-for-all-of-them.-then-make-a-new-dataset-of-just-the-centered-variables-using-select-and-a-helper." class="section level4">
<h4><span class="header-section-number">4.1.0.4</span> 1. Create mean-centered versions of “age_bir”, “nsibs”, “income”, and the two sleep variables. Use the same ending (e.g., "_cent") for all of them. Then make a new dataset of just the centered variables using <code>select()</code> and a helper.</h4>
<pre class="r"><code>nlsy &lt;- mutate(nlsy,
               age_bir_cent = age_bir - mean(age_bir),
               nsibs_cent = nsibs - mean(nsibs),
               income_cent = income - mean(income),
               sleep_wkdy_cent = sleep_wkdy - mean(sleep_wkdy),
               sleep_wknd_cent = sleep_wknd - mean(sleep_wknd))</code></pre>
<pre class="message"><code>#&gt;  Error in mutate(nlsy, age_bir_cent = age_bir - mean(age_bir), nsibs_cent = nsibs - : could not find function &quot;mutate&quot;

cent_vars &lt;- select(nlsy, ends_with(&quot;cent&quot;))</code></pre>
<pre class="message"><code>#&gt;  Error in select(nlsy, ends_with(&quot;cent&quot;)): could not find function &quot;select&quot;
cent_vars</code></pre>
<pre class="message"><code>#&gt;  Error in eval(expr, envir, enclos): object &#39;cent_vars&#39; not found</code></pre>
</div>
<div id="look-at-helpselect.-youll-notice-that-rename-is-a-related-function.-looking-at-the-examples-to-help-rename-age_bir-to-age_1st_birth-without-making-a-new-column." class="section level4">
<h4><span class="header-section-number">4.1.0.5</span> 3. Look at <code>help(select)</code>. You’ll notice that <code>rename()</code> is a related function. Looking at the examples to help, rename “age_bir” to “age_1st_birth” without making a new column.</h4>
<pre class="r"><code>nlsy &lt;- rename(nlsy, age_1st_birth = age_bir)</code></pre>
<pre class="message"><code>#&gt;  Error in rename(nlsy, age_1st_birth = age_bir): could not find function &quot;rename&quot;
nlsy</code></pre>
<pre class="message"><code>#&gt;  Error in eval(expr, envir, enclos): object &#39;nlsy&#39; not found</code></pre>
</div>
<div id="create-a-dataset-that-consists-only-of-the-missing-values-in-slp_cat_wkdy.-check-how-many-rows-it-has-there-should-be-3." class="section level4">
<h4><span class="header-section-number">4.1.0.6</span> 2. Create a dataset that consists <em>only</em> of the missing values in <code>slp_cat_wkdy</code>. Check how many rows it has (there should be 3!).</h4>
<pre class="r"><code>newdat2 &lt;- filter(nlsy, is.na(slp_cat_wkdy))</code></pre>
<pre class="message"><code>#&gt;  Error in as.ts(x): object &#39;nlsy&#39; not found
nrow(newdat2)</code></pre>
<pre class="message"><code>#&gt;  Error in nrow(newdat2): object &#39;newdat2&#39; not found</code></pre>
<hr />
</div>
<div id="look-up-the-between-function-in-help.-figure-out-how-to-use-this-to-answer-question-1-when-choosing-people-whose-income-is-between-20000-and-50000.-check-to-make-sure-you-get-the-same-number-of-rows." class="section level4">
<h4><span class="header-section-number">4.1.0.7</span> 3. Look up the <code>between()</code> function in help. Figure out how to use this to answer question 1, when choosing people whose income is between 20,000 and 50,000. Check to make sure you get the same number of rows.</h4>
<pre class="r"><code>newdat3 &lt;- filter(nlsy,
                 (sleep_wkdy &gt; 7 &amp; sleep_wknd &gt; 7) |
                   between(income, 20000, 50000))</code></pre>
<pre class="message"><code>#&gt;  Error in as.ts(x): object &#39;nlsy&#39; not found
nrow(newdat)</code></pre>
<pre class="message"><code>#&gt;  Error in nrow(newdat): object &#39;newdat&#39; not found
nrow(newdat3)</code></pre>
<pre class="message"><code>#&gt;  Error in nrow(newdat3): object &#39;newdat3&#39; not found</code></pre>
</div>
</div>
</div>
</div>
